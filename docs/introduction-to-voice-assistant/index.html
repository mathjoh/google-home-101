
<!doctype html>

<html>
<head>
  <meta name="viewport" content="width=device-width, minimum-scale=1.0, initial-scale=1.0, user-scalable=yes">
  <meta name="theme-color" content="#4F7DC9">
  <meta charset="UTF-8">
  <title>Introduction to Voice Assistant with Google Home</title>
  <script src="../bower_components/webcomponentsjs/webcomponents-lite.js"></script>
  <link rel="import" href="../elements/codelab.html">
  <link rel="stylesheet" href="//fonts.googleapis.com/css?family=Source+Code+Pro:400|Roboto:400,300,400italic,500,700|Roboto+Mono">
  <style is="custom-style">
    body {
      font-family: "Roboto",sans-serif;
      background: var(--google-codelab-background, #F8F9FA);
    }
  </style>
  
</head>
<body unresolved class="fullbleed">

  <google-codelab title="Introduction to Voice Assistant with Google Home"
                  environment="web"
                  feedback-link="">
    
      <google-codelab-step label="Welcome ! ðŸ‘‹" duration="0">
        <p>Welcome to this workshop: An introduction to Voice Assistant with Google Cloud.</p>
<p>The code is split in X part. First you will get to do tasks</p>


      </google-codelab-step>
    
      <google-codelab-step label="Installation &amp; setup" duration="0">
        <h2>Requirements for the workshop:</h2>
<ul>
<li>Your own Google Account</li>
<li><a href="https://nodejs.org/en/download/" target="_blank">Nodejs</a> installed on your computer</li>
</ul>
<p>Without these requirements fulfilled you will not be able to do the workshop.</p>
<h2>Installation</h2>
<p>Start by installing <a href="https://nodejs.org/en/download/" target="_blank">Nodejs</a>.<br>You can verify that it is correctly installed by typing <code>node -v</code> in the terminal.</p>
<h3>Https connection</h3>
<p>We need https connection for running the Dialogflow commands.</p>
<p>Registrere pÃ¥ ngrok.com/io</p>
<p>To run the application, run <code>npm i &amp;&amp; npm run dev</code>, application is available on <a href="http://localhost:1234" target="_blank">http://localhost:1234</a></p>
<p>To run ngrok go to ngrok.com and register. Then run step 3 in the setup to connect ypur account <code>./ngrok authtoken [your auth token]</code>. Then run <code>./ngrok http 1234</code> to start the http tunnel. Copy the https url given in the terminal into the webhook address in the tab fullfilment in Dialogflow.</p>
<h2>setup</h2>
<p>For this workshop you will need a Google account.</p>
<ul>
<li>Go to <a href="https://developers.google.com/actions/" target="_blank">Google Actions</a> to get started.</li>
<li>Go to Actions Console</li>
</ul>
<h2>Create your first project</h2>
<ul>
<li>Add/Import Project<ul>
<li>Accept Terms of Service and choose Country of residence.</li>
<li>Click &#34;Agree and Continue&#34;<br><br></li>
</ul>
</li>
<li>Enter the name of you project <em>Voice Assistant Workshop</em></li>
<li>Let the language for your Actions project be <em>English</em></li>
<li>Click Create Project</li>
</ul>
<p>Wait while the project is being created</p>
<h2>Dialogflow</h2>
<ul>
<li>Go to <a href="https://dialogflow.com/" target="_blank">Dialogflow</a></li>
<li>Sign in with your Google Account</li>
<li>Let Dialogflow get permission to your Google Account</li>
</ul>
<p>Review your account settings</p>
<ul>
<li>Choose country or territory (Norway)</li>
<li>Accept Terms of Service</li>
<li>Click &#34;Create Agent&#34;</li>
</ul>
<h3>Create your agent</h3>
<p>We are now going to create your first agent:</p>
<ul>
<li>Give the agent a name: <em>Voice-assistant-workshop-agent</em></li>
<li>Language: <em>English - en</em></li>
<li>Timezone: GMT +2:00</li>
<li>Google Project: voice-assistant-workshop</li>
</ul>
<p>Click &#34;Create&#34;</p>
<h5>Inspecting the agent</h5>
<p>Let&#39;s inspect the agent we have created:</p>
<p>The Service Account: Used for accessing the</p>


      </google-codelab-step>
    
      <google-codelab-step label="Main tasks:" duration="0">
        <h2>Drones Cream</h2>
<p>&#34;We deliver great ice cream delivered with drones&#34;</p>
<p>Pay the drone when you get the cone.</p>
<p>Give menu</p>
<p>Who are you?<br>Where are you?<br>What ice cream do you want?</p>
<p>Check if the ice cream is still available?</p>


      </google-codelab-step>
    
      <google-codelab-step label="Part 1: Dialogflow" duration="10">
        <h2>Dialogflow intent fulfillment</h2>
<p>In this part you will learn to use use Dialogflow to create your own intent fulfillment.<br>The tasks you create will be used later in the workshop.</p>
<h3>Task 1</h3>
<p>Create an intent welcoming the user to the Drone&#39;s Cream virtual store using only Dialogflow.<br>The intent should answer the user with a welcome prompt.</p>
<p>The intent should answer prompts such as &#34;Hi&#34;, &#34;hello&#34;, &#34;good morning&#34; etc.</p>
<p>The response should include the time of day if the prompt has it. I.e:<br>If the prompt is &#34;Good afternoon&#34; the answer should also start with &#34;Good afternoon&#34;.</p>
<p>Hint: We want to create our own welcome intent, so you will have to delete the existing welcome intent (<em>Default Welcome Intent</em>).</p>
<h3>Task 2</h3>
<p>Make the intent from task 1 your default welcoming intent,<br>being read when a user starts a conversation with your application.</p>
<h3>Task 3</h3>
<p>Create an intent listing the following inventory for the virtual Ice Cream shop: Vanilla, Chocolate, Mint and Strawberry.<br>Do this using using only Dialogflow.</p>
<p>The intent should answer questions such as &#34;What kinds of flavours do you have?&#34; and &#34;What ice creams do you offer?&#34;.</p>
<h3>Task 4</h3>
<p>Create an intent to order a number of cones of ice cream using using only Dialogflow. The user must supply one<br>flavour and the number of cones as required parameters. In addition the user may supply the location he or she wants the<br>ice cream delivered.</p>
<p>If either flavour or number of cones is missing from the request the user should receive a prompt to supply these.</p>
<p>The answer should include the order details including location if it is supplied.</p>


      </google-codelab-step>
    
      <google-codelab-step label="Part 2: Webhooks" duration="20">
        <h2>Webhook intent fulfillment</h2>
<p>In this part you will need to adapt the intents created in part one to be answered by a webhook instead of Dialogflow.</p>
<h3>Task 1</h3>
<p>Enable webhook fulfillment for the intent created in task one in part one.</p>
<p>Create a simple express webhook answering the intent with the same response as Dialogflow did as well as fallback<br>handling if unknown intents are routed to the webhook.</p>
<p>Test your webhook using either the testing tool in Dialogflow or Actions by Google.</p>
<h3>Task 2</h3>
<p>Convert the intent from task three in part one to be answered by your webhook. This time the answer should reflect the<br>actual inventory of the Ice Cream store. We have provided you with a small service with in-memory inventory handling<br>which should contain all the necessary business logic in the file <code>store.js</code>.</p>
<p>Have the answer to the prompt include both which flavours are in stock and which are out of stock. The number of cones<br>remaining of each does not need to be included.</p>
<p>Test your webhook using either the testing tool in Dialogflow or Actions by Google.</p>
<h3>Task 3</h3>
<p>Convert the intent from task thfourree [???] in part one to be answered by your webhook. This time the answer should reflect the<br>actual inventory of the Ice Cream store.</p>
<p>If there is not enough cones of the requested flavour left the response should reflect that. If there are enough cones<br>left the inventory numbers should be updated.</p>
<p>Test your webhook using either the testing tool in Dialogflow or Actions by Google.</p>
<h3>Task 4</h3>
<h4>a)</h4>
<p>In this task you need to update the intent fulfillment from the previous task.</p>
<p>As specified in task four in part one, location is an optional parameter. But in order to fulfill and order, our drones<br>need to know where to deliver the ice cream cones. To get this knowledge you will ask the user for permission to get the<br>location of the device used to communicate the order.</p>
<p>If requests contain location we can use the same logic as in the previous task. Otherwise, request the permission to get<br>device location from the user.</p>
<p>Create a new intent handling the response to the permission request submitted by the user. This request must handle both<br>getting the permission as well as being denied the permission.</p>
<p>Hint: <a href="../../json/request/permission-granted.json" target="_blank">Permission request granted</a></p>
<h4>b)</h4>
<p>Now that we can get the location of the device our service is ready to start serving the community. Unfortunately it<br>will keep asking for permission to get device location from users who have already consented.</p>
<p>Update your service to check if the user already have consented before asking for the location again.</p>


      </google-codelab-step>
    
      <google-codelab-step label="And that&#39;s it! âŽˆ" duration="0">
        <h2>Feedback? ðŸ˜‡</h2>
<p>We would love to get feedback to improve our workshop. You are awesome if you have time to fill out . It is of course anonymous.</p>
<h2>Any questions?</h2>
<p>Contact us on <a href="https://twitter.com/mathjoh91" target="_blank">@mathjoh91</a> or <a href="https://twitter.com/ingridguren" target="_blank">@ingridguren</a>.</p>


      </google-codelab-step>
    
  </google-codelab>

  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
    ga('create', 'UA-49880327-14', 'auto');

    (function() {
      var gaCodelab = '';
      if (gaCodelab) {
        ga('create', gaCodelab, 'auto', {name: 'codelab'});
      }

      var gaView;
      var parts = location.search.substring(1).split('&');
      for (var i = 0; i < parts.length; i++) {
        var param = parts[i].split('=');
        if (param[0] === 'viewga') {
          gaView = param[1];
          break;
        }
      }
      if (gaView && gaView !== gaCodelab) {
        ga('create', gaView, 'auto', {name: 'view'});
      }
    })();
  </script>

</body>
</html>
